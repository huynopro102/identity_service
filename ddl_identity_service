-- public."permission" definition

-- Drop table

-- DROP TABLE public."permission";

CREATE TABLE public."permission" (
	"name" varchar(255) NOT NULL,
	code varchar(255) NULL,
	description varchar(255) NULL,
	is_active bool NULL,
	CONSTRAINT permission_pkey PRIMARY KEY (name)
);


-- public."role" definition

-- Drop table

-- DROP TABLE public."role";

CREATE TABLE public."role" (
	"name" varchar(255) NOT NULL,
	description varchar(255) NULL,
	CONSTRAINT role_name_check CHECK (((name)::text = ANY ((ARRAY['ADMIN'::character varying, 'EDITOR'::character varying, 'AUTHOR'::character varying, 'CONTRIBUTOR'::character varying, 'SUBSCRIBER'::character varying, 'USER'::character varying])::text[]))),
	CONSTRAINT role_pkey PRIMARY KEY (name)
);


-- public.users definition

-- Drop table

-- DROP TABLE public.users;

CREATE TABLE public.users (
	id varchar(255) NOT NULL,
	created_at timestamp(6) NOT NULL,
	deleted_at timestamp(6) NULL,
	dob date NULL,
	email varchar(255) NOT NULL,
	email_verified bool NULL,
	failed_login_attempts int4 NULL,
	last_login_at timestamp(6) NULL,
	"password" varchar(255) NOT NULL,
	password_reset_expires timestamp(6) NULL,
	password_reset_token varchar(255) NULL,
	profile_image varchar(255) NULL,
	status varchar(255) NULL,
	updated_at timestamp(6) NOT NULL,
	username varchar(255) NOT NULL,
	CONSTRAINT uk6dotkott2kjsp8vw4d0m25fb7 UNIQUE (email),
	CONSTRAINT ukr43af9ap4edm43mmtq01oddj6 UNIQUE (username),
	CONSTRAINT users_pkey PRIMARY KEY (id),
	CONSTRAINT users_status_check CHECK (((status)::text = ANY ((ARRAY['ACTIVE'::character varying, 'INACTIVE'::character varying, 'BANNED'::character varying])::text[])))
);


-- public.role_permissions definition

-- Drop table

-- DROP TABLE public.role_permissions;

CREATE TABLE public.role_permissions (
	role_name varchar(255) NOT NULL,
	permission_name varchar(255) NOT NULL,
	CONSTRAINT role_permissions_pkey PRIMARY KEY (role_name, permission_name),
	CONSTRAINT fk5apxdynankvq5vbor6crl42g7 FOREIGN KEY (permission_name) REFERENCES public."permission"("name"),
	CONSTRAINT fkcppvu8fk24eqqn6q4hws7ajux FOREIGN KEY (role_name) REFERENCES public."role"("name")
);


-- public.user_roles definition

-- Drop table

-- DROP TABLE public.user_roles;

CREATE TABLE public.user_roles (
	user_id varchar(255) NOT NULL,
	role_name varchar(255) NOT NULL,
	CONSTRAINT user_roles_pkey PRIMARY KEY (user_id, role_name),
	CONSTRAINT fk53v9b6vwc56nm9llvcdhs8y8f FOREIGN KEY (role_name) REFERENCES public."role"("name"),
	CONSTRAINT fkhfh9dx7w3ubf1co1vdev94g3f FOREIGN KEY (user_id) REFERENCES public.users(id)
);