<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">


<head>
    <meta charset="UTF-8">
    <title>Markdown Live Preview</title>
    <!-- Thêm Bootstrap CSS từ CDN , this is a css and js for layout include header and footer -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <!-- Thêm JS của Bootstrap từ CDN (Bootstrap yêu cầu jQuery và Popper.js cho một số tính năng như dropdown, modal) -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.0.0/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <!--    -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/codemirror.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/theme/monokai.min.css" rel="stylesheet">
    <!--    CodeMirror: Trình soạn thảo mã Markdown.-->
    <!--    Marked.js: Chuyển đổi Markdown sang HTML để hiển thị kết quả trong chế độ xem trước.-->

</head>

<body>

    <div th:insert="fragments/header :: header"></div>


    <div hidden class="hidden editor-container">
        <div class="hidden editor">
            <textarea id="markdown-editor" class="hidden">
# Markdown syntax guide

## Headers

* ∞ (vô cực)
* ≠ (không bằng)
* ≈ (xấp xỉ)

### Common Symbols
* ✓ (check)
* ✗ (cross)
* ⚠ (cảnh báo)
* ℹ (thông tin)
* ⭐ (sao)
* ☎ (điện thoại)
* ✉ (email)
* ⌛ (đồng hồ cát)
* ♥ (tim)
            </textarea>
        </div>
    </div>


    <div class="container">
        <div class="row justify-content-center ">

            <div class="col-md-4">
                <div class="card">
                    <img class="card-img-top" src="https://placehold.co/600x400" alt="Card image cap">
                    <div class="card-body">
                        <h5 class="card-title">Card title</h5>
                        <div class="preview" ></div>
                        <a href="#" class="btn btn-primary">Go somewhere</a>
                    </div>
                </div>
            </div>

            <div class="col-md-4">
                <div class="card">
                    <img class="card-img-top" src="https://placehold.co/600x400" alt="Card image cap">
                    <div class="card-body">
                        <h5 class="card-title">Card title</h5>
                        <div class="preview" ></div>
                        <a href="#" class="btn btn-primary">Go somewhere</a>
                    </div>
                </div>
            </div>



            <div class="col-md-4">
                <div class="card">
                    <img class="card-img-top" src="https://placehold.co/600x400" alt="Card image cap">
                    <div class="card-body">
                        <h5 class="card-title">Card title</h5>
                        <div class="preview" ></div>
                        <a href="#" class="btn btn-primary">Go somewhere</a>
                    </div>
                </div>
            </div>

            <div class="col-md-4">
                <div class="card">
                    <img class="card-img-top" src="https://placehold.co/600x400" alt="Card image cap">
                    <div class="card-body">
                        <h5 class="card-title">Card title</h5>
                        <div class="preview" ></div>
                        <a href="#" class="btn btn-primary">Go somewhere</a>
                    </div>
                </div>
            </div>



        </div>
    </div>





    <!-- Replace Summernote with Markdown libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/codemirror.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/mode/markdown/markdown.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/marked/4.0.2/marked.min.js"></script>

    <script>
        let editor;
        let syncScroll = false;
        const preview = document.getElementsByClassName('preview');

        // Initialize CodeMirror editor
        window.onload = function () {
            editor = CodeMirror.fromTextArea(document.getElementById('markdown-editor'), {
                mode: 'markdown',
                theme: 'monokai',
                lineNumbers: true,
                lineWrapping: true
            });

            // Initial render
            updatePreview();

            // Update preview on change
            editor.on('change', updatePreview);
        };
   
        function updatePreview(item) {
            for(let i=0;i<preview.length;i++){
                if(preview[i]){
                    preview[i].innerHTML = marked.parse(editor.getValue());
                }
            }

        }


    </script>

    <div th:insert="fragments/footer :: footer"></div>

</body>

</html>

